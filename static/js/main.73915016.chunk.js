(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{26:function(n,e,t){"use strict";t.r(e);var r,o,a,i,c,s,l,u,d,p,b,f,j,x,O=t(0),g=t(14),m=t.n(g),v=t(7),h=t(12),w=t(2),S=t(6),y=t(3),k=t(4),z=k.a.div(r||(r=Object(y.a)(['\n  position: relative;\n  user-select: none;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100vw;\n  margin: 0 auto;\n  &:before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: rgba(255, 255, 255, 0);\n    width: 100%;\n    height: 100vh;\n    z-index: -1;\n    z-index: ',";\n  }\n"])),(function(n){return n.currentState.winner&&!1===n.currentState.viewMode&&"100"})),C=k.a.button(o||(o=Object(y.a)(["\n  position: relative;\n  background: #9d563e;\n  border: 1px solid black;\n  ","\n  ",'\n  border-radius: 0;\n  line-height: 35px;\n  height: 35px;\n  width: 35px;\n  text-align: center;\n  margin-right: -1px;\n  pointer-events: none;\n  &:focus {\n    outline: none;\n  }\n  &:before {\n    content: "";\n    pointer-events: auto;\n    position: absolute;\n    height: 20px;\n    width: 20px;\n    top: 0%;\n    left: 0%;\n    transform: translate(-50%, -50%);\n    border-radius: 50%;\n    background: ',";\n    border: ",";\n    cursor: pointer;\n  }\n"])),(function(n){return n.lastItem&&"\n    border: 0;\n    background: transparent;\n  "}),(function(n){return n.lastRow&&"\n    border: 0;\n    background: transparent;\n  "}),(function(n){return n.state&&n.state.player.stoneColor}),(function(n){return n.state&&"1px solid black"})),M=k.a.div(a||(a=Object(y.a)(["\n  display: table;\n  margin-top: -2px;\n"]))),B=k.a.div(i||(i=Object(y.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin-left: 44px;\n  margin-top: 34px;\n  min-width: ",'px;\n  &:before {\n    content: "";\n    position: absolute;\n    border: 14px solid #5d200d;\n    box-shadow: 3px 3px 5px 5px #cccccc;\n    border-radius: 4px;\n    top: -34px;\n    left: -34px;\n    width: 100%;\n    height: 100%;\n    background: #9d563e;\n  }\n'])),(function(n){return 34*n.size})),I=k.a.div(c||(c=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  box-sizing: border-box;\n  height: ","px;\n  width: 100px;\n  min-width: 100px;\n  border: 1px solid black;\n  background: #aaa;\n  padding: 10px;\n  & > div {\n    margin-bottom: 10px;\n  }\n"])),(function(n){return n.size})),P=k.a.div(s||(s=Object(y.a)(["\n  display: flex;\n  padding: 5px 0px;\n  justify-content: space-between;\n  & > div:hover {\n    cursor: pointer;\n    color: blue;\n  }\n"]))),N=k.a.div(l||(l=Object(y.a)(['\n  color: black;\n  &:before {\n    content: "\\21B6";\n    font-size: 20px;\n  }\n'],['\n  color: black;\n  &:before {\n    content: "\\\\21B6";\n    font-size: 20px;\n  }\n']))),J=k.a.div(u||(u=Object(y.a)(['\n  color: black;\n  &:after {\n    content: "\\21B7";\n    font-size: 20px;\n  }\n'],['\n  color: black;\n  &:after {\n    content: "\\\\21B7";\n    font-size: 20px;\n  }\n']))),G=k.a.div(d||(d=Object(y.a)(["\n  font-size: 12px;\n  color: red;\n  text-wrap: wrap;\n"]))),R=k.a.div(p||(p=Object(y.a)(["\n  text-align: center;\n  &:hover {\n    cursor: pointer;\n    color: blue;\n  }\n"]))),A=k.a.div(b||(b=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px 0px;\n  background: #3174e2;\n  color: white;\n"]))),E=Object(k.a)(A)(f||(f=Object(y.a)([""]))),V=k.a.div(j||(j=Object(y.a)(['\n  position: relative;\n  display: flex;\n  align-items: center;\n  &:after {\n    content: "";\n    position: absolute;\n    background: ',";\n    top: 50%;\n    right: 0;\n    transform: translate(0, -50%);\n    border-radius: 50%;\n    width: 20px;\n    height: 20px;\n  }\n"])),(function(n){return n.player.stoneColor})),T=k.a.div(x||(x=Object(y.a)(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 16px;\n  color: #434343;\n  top: 50%;\n  left: ","px;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  height: 200px;\n  background: rgba(255, 255, 255, 0);\n  z-index: -1;\n  z-index: ",";\n  & > div {\n    padding: 5px;\n    background: rgba(255, 197, 66, 1);\n    margin-bottom: 10px;\n  }\n"])),(function(n){return n.size}),(function(n){return n.currentState.winner&&!1===n.currentState.viewMode&&"101"})),q=t(1),D=function(n){var e=n.handleAddStone,t=n.position,r=n.getGomokuState,o=n.lastItem,a=n.lastRow;return Object(q.jsx)(C,{onClick:function(){e(t)},state:r(t),lastItem:o,lastRow:a})},F=function(n){var e=n.handleAddStone,t=n.rowCount,r=n.size,o=n.getGomokuState,a=n.lastRow;return Object(q.jsx)(M,{children:r.map((function(n,i){return Object(q.jsx)(D,{getGomokuState:o,handleAddStone:e,position:n+t,lastItem:r.length===i+1,lastRow:a},i)}))})},H=Object(O.memo)(F),K=function(n){var e=n.size,t=n.currentState,r=n.info,o=n.events,a=o.controlPreviousButton,i=o.controlNewState,c=o.controlNextButton,s=o.restart,l=r.firstPlayer,u=r.secondPlayer,d=r.gomoku,p=r.message;return Object(q.jsxs)(I,{size:34*e+28,children:[!t.viewMode&&Object(q.jsxs)(A,{children:[t.player.name," \u7684\u56de\u5408"]}),t.viewMode&&Object(q.jsxs)(E,{children:["\u7b2c ",t.currentStep,"/",d.length," \u6b65"]}),Object(q.jsx)(V,{player:l,children:l.name}),Object(q.jsx)(V,{player:u,children:u.name}),Object(q.jsxs)(P,{children:[Object(q.jsx)(N,{onClick:a}),Object(q.jsx)("div",{onClick:i,children:t.viewMode?"\u263a":"\u66f4\u65b0"}),Object(q.jsx)(J,{onClick:c})]}),Object(q.jsx)(R,{onClick:s,children:"\u91cd\u65b0\u958b\u59cb"}),p&&Object(q.jsx)(G,{children:p})]})},L=function(n){var e=n.events,t=n.currentState,r=n.size,o=e.controlViewMode,a=e.restart;return Object(q.jsxs)(T,{currentState:t,size:100+r/2*34,children:[Object(q.jsxs)("div",{children:["\u606d\u559c ",t.player.name," \u52dd\u5229"]}),Object(q.jsx)("div",{onClick:o,children:"\u89c0\u770b\u9019\u5c40\u68cb\u8b5c"}),Object(q.jsx)("div",{onClick:a,children:"\u91cd\u65b0\u958b\u59cb\u9019\u5c40"})]})};var Q=function(){var n={length:19,firstPlayer:{name:"Tim",senteOrGote:"sente",stoneColor:"black"},secondPlayer:{name:"Bob",senteOrGote:"gote",stoneColor:"white"}},e=n.length,t=n.firstPlayer,r=n.secondPlayer,o=Array.from(n,(function(n,e){return e+1})),a=Object(O.useState)((function(){var n=window.localStorage.getItem("counter");return n?Object(w.a)({},JSON.parse(n)):{}})),i=Object(S.a)(a,2),c=i[0],s=i[1],l=Object(O.useState)((function(){var n=window.localStorage.getItem("gomoku");return n?Object(h.a)(JSON.parse(n)):[]})),u=Object(S.a)(l,2),d=u[0],p=u[1],b=Object(O.useState)((function(){var n=window.localStorage.getItem("message");return n?JSON.parse(n):""})),f=Object(S.a)(b,2),j=f[0],x=f[1],g=Object(O.useState)((function(){var n=window.localStorage.getItem("currentState");return n?Object(w.a)({},JSON.parse(n)):{player:t,currentStep:0,winner:!1,viewMode:!1}})),m=Object(S.a)(g,2),y=m[0],k=m[1];Object(O.useEffect)((function(){U({counter:c,gomoku:d,message:j,currentState:y})}));var C=function(n){var e=c[n];if(!(e>y.currentStep))return d[e-1]},M=function(n){if(!0!==y.winner){if(y.currentStep<d.length)return x("\u6309\u66f4\u65b0\u624d\u53ef\u7e7c\u7e8c\u4e0b\u68cb");var e=n,o=y.player,a=y.player.stoneColor,i=y.currentStep,l=P(e,a);if(!c[n]){if(i++,s(Object(w.a)(Object(w.a)({},c),{},Object(v.a)({},n,i))),p([].concat(Object(h.a)(d),[Object(w.a)(Object(w.a)({},y),{},{position:n,currentStep:i})])),l)return k(Object(w.a)(Object(w.a)({},y),{},{currentStep:i,winner:l}));k(Object(w.a)(Object(w.a)({},y),{},{currentStep:i,player:o.name!==t.name?t:r}))}}},I=function(){s({}),p([]),k({player:t,currentStep:0,winner:!1,viewMode:!1}),x("")},P=function(n,t){return[e+1,e-1,e,1].some((function(r){var o=1;return function n(r,a){if(1===a&&(r-1)%e===0)return!1;var i=r-a;if(i<=0||!c[i])return!1;var s=C(i).player.stoneColor;return t===s&&(o++,n(i,a)||o)}(n,r),function n(r,a){if(1===a&&r%e===0)return!1;var i=r+a;if(i>e*e||!c[i])return!1;var s=C(i).player.stoneColor;return t===s&&(o++,n(i,a)||o)}(n,r),o>=5}))};return Object(q.jsxs)(z,{currentState:y,children:[Object(q.jsx)(L,{events:{controlViewMode:function(){k(Object(w.a)(Object(w.a)({},y),{},{viewMode:!0}))},restart:I},currentState:y,size:e}),Object(q.jsx)(K,{events:{controlPreviousButton:function(){var n=y.player,e=y.currentStep;e<=0||k(Object(w.a)(Object(w.a)({},y),{},{currentStep:e-1,player:n.name!==t.name?t:r}))},controlNextButton:function(){var n=y.player,e=y.currentStep;e>=d.length||k(Object(w.a)(Object(w.a)({},y),{},{currentStep:e+1,player:n.name!==t.name?t:r}))},controlNewState:function(){if(!y.viewMode){x("");var n=y.currentStep;p(d.slice(0,n)),s(Object.filter(c,(function(e){return e<=n})))}},restart:I},info:{firstPlayer:t,secondPlayer:r,gomoku:d,message:j},currentState:y,size:e}),Object(q.jsx)(B,{size:e,children:o.map((function(n,t){return Object(q.jsx)(H,{getGomokuState:C,rowCount:o.length*t,size:o,handleAddStone:M,lastRow:e===t+1},t)}))})]})},U=function(n){Object.keys(n).map((function(e){return window.localStorage.setItem(e,JSON.stringify(n[e]))}))};Object.filter=function(n,e){return Object.keys(n).filter((function(t){return e(n[t])})).reduce((function(e,t){return e[t]=n[t],e}),{})},t(25),m.a.render(Object(q.jsx)(Q,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.73915016.chunk.js.map